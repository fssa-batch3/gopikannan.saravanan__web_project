<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PIN(People In Need) My donations</title>
    <link
      rel="stylesheet"
      href="../../Assets/css/basicdetailsfunddraiser.css"
    />
    <link rel="stylesheet" href="../../Assets/css/header.css" />
    <link rel="stylesheet" href="../../Assets/css/footer.css" />
    <link rel="stylesheet" href="../../Assets/css/universal.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script type="text/javascript">
      function togglemenu() {
        document.getElementById("sidebar").classList.toggle("active");
      }
    </script>
  </head>
  <body>
    <!--  header starts-->
    <header></header>
    <!-- header ends -->
    <div class="details-head">Edit</div>

    <!-- container starts -->
    <div class="container">
      <!-- form start -->

      <form id="form">
        <div class="input-div">
          <label>Name:</label>
          <input
            type="text"
            id="name"
            placeholder="Enter your name"
            pattern="^(?=.{2,50}$)[A-Za-z]+(?:\s[A-Za-z]+){0,3}$"
            required
          />
        </div>
        <div class="input-div">
          <label>Email ID:</label>
          <input
            type="email"
            id="email"
            placeholder="Enter your email id"
            title="Enter the correct email"
          />
        </div>
        <div class="input-div">
          <label>Phone Number:</label>
          <input
            type="tel"
            id="mobileno"
            placeholder="Enter your Ph no"
            pattern="[0-9]{10}"
            required
            title=" Phone number must have 10 digits"
          />
        </div>
        <div class="input-div">
          <label>I am raising fund for:</label>
          <select name="cause" id="cause">
            <option value="Medical">Medical</option>
            <option value="Educational">Educational</option>
            <option value="Socialcause">Social Cause</option>
          </select>
        </div>
        <div class="input-div">
          <label>Address:</label
          ><input
            id="address"
            type="text"
            pattern="^(?=.{1,200}$)[A-Za-z0-9!@#$%^&*()_+-={}[\]|\\;:'>,.?/]+[A-Za-z0-9]+(?:\s[A-Za-z0-9\s!@#$%^&*()_+-={}[\]|\\;:'>,.?/]+[A-Za-z0-9]+){0,10}$"
            required
          />
        </div>

        <div class="input-div">
          <label>Cover Picture:</label>
          <input
            id="image"
            type="url"
            placeholder="place your image url"
            title="enter only image urls"
            required
          />
        </div>
        <div class="input-div">
          <label>Title:</label>
          <input
            id="title"
            type="text"
            required
            pattern="^(?=.{4,100}$)[A-Za-z]+(?:\s[A-Za-z]+){0,10}$"
          />
        </div>
        <div class="input-div">
          <label>Name:</label>
          <input
            id="name_hos"
            type="text"
            required
            placeholder="Hospital,School,organization name"
            pattern="^(?=.{4,100}$)[A-Za-z]+(?:\s[A-Za-z]+){0,10}$"
          />
        </div>
        <div class="input-div">
          <label>Location:</label>
          <input
            id="location2"
            type="text"
            required
            placeholder="Hospital,School,organization location"
            pattern="^(?=.{4,100}$)[A-Za-z]+(?:\s[A-Za-z]+){0,10}$"
          />
        </div>
        <div class="input-div">
          <label>Summary:</label>
          <input
            id="summary_stry"
            type="text"
            required
            placeholder="Write your summary of your story"
          />
        </div>
        <div class="input-div">
          <label>Write Your Story:</label>
          <textarea
            value="Our school..."
            name="story"
            id="story"
            pattern="^(?=.{0,500}$)[A-Za-z0-9!@#$%^&*()_+-={}[\]|\\;:'>,.?/]+[A-Za-z0-9]+(?:\s[A-Za-z0-9\s!@#$%^&*()_+-={}[\]|\\;:'>,.?/]+[A-Za-z0-9]+){0,50}$"
            rows="5"
            required
            placeholder="Write about who is this fundraiser for How/Why/When  do you need funds what is the purpose..."
          ></textarea>
        </div>
        <div class="input-div">
          <label>Upload Required Documents :</label>
          <input id="image_doc" type="url" title="enter only image urls" />
        </div>
        <div class="input-div">
          <label>I want to raise the amount Rs:</label>
          <input
            id="amount"
            type="text"
            title="Enter only the amount only in numbers"
            pattern="[0-9]{5,20}"
            maxlength="20"
            required
          />
        </div>
        <div class="input-div">
          <label>Your UPI url:</label>
          <input id="upi" type="text" placeholder="paste your upi url" />
        </div>

        <!-- <a href="../fundraiser/Fundraiserdetailsform1.html">  -->
        <button type="submit" class="continue">SAVE</button>
      </form>
      <!-- </a>  -->
      <!-- form ends -->
    </div>
    <!-- container ends -->
    <!-- Footer  -->
    <div class="footer"></div>

    <!-- footer end -->

    <script>
      // only Product id

      let product_id = JSON.parse(window.localStorage.getItem("updateData"));
      // card details data
      let carddetails = JSON.parse(window.localStorage.getItem("carddetails"));
      let card_ob = carddetails.find(function (object) {
        let id_check = object["product_id"];
        if (id_check == product_id[0]["product_id"]) {
          return true;
        }
      });
      console.log(card_ob);

      const fundraisename = document.getElementById("name");
      const mail = document.getElementById("email");
      const dropDown = document.getElementById("cause");
      const mobileno = document.getElementById("mobileno");
      const address = document.getElementById("address");
      const image = document.getElementById("image");
      const title = document.getElementById("title");
      const name_hosp = document.getElementById("name_hos");
      const locationofcause = document.getElementById("location2");
      const summary_str = document.getElementById("summary_stry");
      const story = document.getElementById("story");
      const image_doc = document.getElementById("image_doc");
      const amount = document.getElementById("amount");
      const upi = document.getElementById("upi");

      fundraisename.value = card_ob["fundraiser"];
      mail.value = card_ob["mail"];
      dropDown.value = card_ob["drop"];
      mobileno.value = card_ob["phno"];
      address.value = card_ob["address"];
      title.value = card_ob["title"];
      image.value = card_ob["img"];
      name_hosp.value = card_ob["alt"];
      locationofcause.value = card_ob["location"];
      summary_str.value = card_ob["storySum"];
      story.value = card_ob["story"];
      image_doc.value = card_ob["image_doc"];
      amount.value = card_ob["expected_amt"];
      upi.value = card_ob["upiUrl"];

      let form = document.getElementById("form");

      form.addEventListener(function (event) {
        const fundraisename = document.getElementById("name").value.trim();
        const mail = document.getElementById("email").value.trim();
        const dropDown = document.getElementById("cause").value;
        const mobileno = document.getElementById("mobileno").value.trim();
        const address = document.getElementById("address").value.trim();
        const image = document.getElementById("image").value.trim();
        const title = document.getElementById("title").value.trim();
        const name_hosp = document.getElementById("name_hos").value;
        const locationofcause = document
          .getElementById("location2")
          .value.trim();
        const summary_str = document
          .getElementById("summary_stry")
          .value.trim();
        const story = document.getElementById("story").value.trim();
        const image_doc = document.getElementById("image_doc").value.trim();
        const amount = document.getElementById("amount").value.trim();
        const upi = document.getElementById("upi").value.trim();

        let match = false;

        if (story === "") {
          alert("Detail of your story can't be left empty");
          return;
        } else {
          match = true;
        }

        if (match == true) {
          let newObject = {
            fundraiser: fundraisename,
            mail: mail,
            drop: dropDown,
            phno: mobileno,
            address: address,
            img: image,
            title: title,
            alt: name_hosp,
            location: locationofcause,
            storySum: summary_str,
            story: story,
            image_doc: image_doc,
            expected_amt: amount,
            upiUrl: upi,
          };
          let assign = Object.assign(card_ob, newObject);

          let cardDesign = carddetails.indexOf(card_ob);

          carddetails[cardDesign] = assign;

          let cardedit = window.localStorage.setItem(
            "carddetails",
            JSON.stringify(carddetails)
          );
          console.log(cardedit);
          alert("Successfully updated your card !!!");
          window.location.href =
            "../../webpage/fundraiser/fundraiser.html?userid=" + userid;
        } else {
          alert("input can't be left null");
          return;
        }
      });
    </script>
    <script src="../../Assets/js/header.js"></script>
    <script src="../../Assets/js/footer.js"></script>
  </body>
</html>
