<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PIN(People In Need).in</title>
    <link rel="stylesheet" href="../../Assets/css/style.css" />
    <link rel="stylesheet" href="../../Assets/css/header.css" />
    <link rel="stylesheet" href="../../Assets/css/footer.css" />
    <link rel="stylesheet" href="../../Assets/css/universal.css" />
    <link rel="stylesheet" href="../../Assets/js/header.js" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="../../Assets/js/demo.js" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script type="text/javascript">
      function togglemenu() {
        document.getElementById("sidebar").classList.toggle("active");
      }
    </script>
  </head>
  <body>
    <!--  header starts-->
    <header></header>
    <!-- header ends -->

    <!-- hero section -->
    <div id="hello" class="hero-sec">
      <img
        class="banner"
        src="../../Assets/images/Hero Banner (1).png"
        alt="banner"
        width="100%"
      />
    </div>
    <!-- hero section -->

    <!-- search box sec-->
    <div class="side-head">Thousands are fundraising on Pin</div>
    <div class="search">
      <input
        type="text"
        placeholder="   Search by name,location,cause..."
        name="search"
        id="search"
      />
      <i class="fa fa-search" width="20px"></i>
    </div>
    <!-- search box sec ens -->

    <!-- main container -->
    <div id="container" class="container"></div>

    <!-- maincontainer end -->

    <div class="viewmore">
      <img
        src="../../Assets/images/arrow-down-sign-to-navigate.png"
        alt="arrow"
        class="arrow"
      />
      <div>
        <a href="../../webpage/donate/donate.html" class="more"
          >View More Fundraisers</a
        >
      </div>
    </div>

    <div class="boxes">
      <p class="heading">Frequently Asked Questions</p>
      <div class="faqs">
        <details>
          <summary>What is Lorem ipsum?</summary>
          <p class="text">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
          </p>
        </details>
        <details>
          <summary>What is Lorem ipsum?</summary>
          <p class="text">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
          </p>
        </details>
        <details>
          <summary>What is Lorem ipsum?</summary>
          <p class="text">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
          </p>
        </details>
        <details>
          <summary>What is Lorem ipsum?</summary>
          <p class="text">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
          </p>
        </details>
        <details>
          <summary>What is Lorem ipsum?</summary>
          <p class="text">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
          </p>
        </details>
      </div>
    </div>

    <div class="review_container">
      <div class="review_box">
        <div class="review_head">Fundraisers reviews</div>
      </div>
    </div>
    <!-- footer starts -->
    <div class="footer"></div>

    <script src="../../Assets/js/header.js"></script>
    <script src="../../Assets/js/footer.js"></script>
    <script>
      let json = [];

      let create_card = JSON.parse(localStorage.getItem("carddetails"));
      console.log(create_card);
      for (let i = 0; i < create_card.length; i++) {
        json.push(create_card[i]);
      }

      for (let i = 0; i < json.length; i++) {
        let container_div;
        let card_div;
        let anchor;
        let span;
        let image;
        let h4_tag;
        let progress_div;
        let b_tag;
        let progress_tag;
        let progress_span_tag;
        let a_span_like;
        let a_span_share;
        let image_share;
        let amount_sec;
        let txt_amount;
        let cash;
        let count;
        let user_div;
        let user_name;
        let name;

        let amount = json[i]["amount_raised"];
        let expected_amount = json[i]["expected_amt"];

        let percentage = Math.floor((amount / expected_amount) * 100);

        // TO CLOSE A CARD WHEN ITS EXPECTED AMOUNT REACHED
        if (amount == expected_amount || amount >= expected_amount) {
          json[i]["amout"] = "reached";
        }
        if (json[i]["amout"] == "unreach") {
          //   <div class="box"></div>
          card_div = document.createElement("div");
          card_div.setAttribute("class", "box");
          // container_div.append(card_div);

          //<a></a>
          anchor = document.createElement("div");
          card_div.append(anchor);

          let a;
          a = document.createElement("a");
          a.setAttribute(
            "href",
            "../../webpage/donate/story.html?product_id=" +
              json[i]["product_id"] +
              "&userid=" +
              json[i]["userId"]
          );
          anchor.append(a);

          //   <img class="image" src="../../Assets/images/education.jpg" alt="education" />
          image = document.createElement("img");
          image.setAttribute("class", "image");
          image.setAttribute("src", json[i]["img"]);
          image.setAttribute("onclick", "redirect()");
          image.setAttribute("alt", "education");
          a.append(image);

          //   <h4></h4>
          h4_tag = document.createElement("h4");
          h4_tag.innerText = json[i]["title"];
          anchor.append(h4_tag);

          //   <div class="progress-sec"></div>
          progress_div = document.createElement("div");
          progress_div.setAttribute("class", "progress-sec");
          anchor.append(progress_div);

          //   <b> 20%</b>

          b_tag = document.createElement("b");
          b_tag.innerText = percentage + "%";
          progress_div.append(b_tag);

          //   <progress id="file" value="32" max="100">20%</progress>
          progress_tag = document.createElement("progress");
          progress_tag.setAttribute("id", "file");
          progress_tag.setAttribute("value", percentage);
          progress_tag.setAttribute("max", "100");
          progress_div.append(progress_tag);

          //span
          progress_span_tag = document.createElement("span");
          progress_span_tag.setAttribute("class", "like");
          progress_div.append(progress_span_tag);

          // a
          a_span_share = document.createElement("a");
          a_span_share.setAttribute("href", "#");
          progress_span_tag.append(a_span_share);

          // img
          image_share = document.createElement("img");
          image_share.setAttribute("src", "../../Assets/images/share.png");
          image_share.setAttribute("class", "share");
          image_share.setAttribute("alt", "share");
          image_share.setAttribute("width", "30px");
          a_span_share.append(image_share);

          // <div class="amount">
          amount_sec = document.createElement("div");
          amount_sec.setAttribute("class", "amount");
          progress_div.append(amount_sec);

          // <span id="txt-amt"></span>
          txt_amount = document.createElement("span");
          txt_amount.setAttribute("id", "txt-amt");
          txt_amount.innerText = "Raised :";
          amount_sec.append(txt_amount);

          // <span id="cash"></span>
          cash = document.createElement("span");
          cash.setAttribute("id", "cash");

          cash.innerHTML = "RS." + json[i]["amount_raised"] + "&nbsp" + "&nbsp";

          amount_sec.append(cash);

          // <div class="user"></div>
          user_div = document.createElement("div");
          user_div.setAttribute("class", "user");
          anchor.append(user_div);

          // <span class="name-label"></span>
          user_name = document.createElement("span");
          user_name.setAttribute("class", "name-label");
          user_name.innerText = "Created by";
          user_div.append(user_name);

          // <span class="name"></span>
          name = document.createElement("span");
          name.setAttribute("class", "name");
          name = innerText = json[i]["fundraiser"];
          user_div.append(name);

          // console.log(json);
          document.querySelector(".container").append(card_div);
          const cards = document.getElementsByClassName("box");
          const container_div = document.getElementById("container");

          const inputSearch = document.getElementById("search");
          inputSearch.addEventListener("input", () => {
            for (let i = 0; i < cards.length; i++) {
              const element = cards[i];
              if (
                element.innerHTML
                  .toLowerCase()
                  .includes(inputSearch.value.toLowerCase())
              ) {
                element.style.display = "block";
              } else {
                element.style.display = "none";
                container_div.innerHTML = "No Items Found";
              }
            }
          });
        }
      }

      function redirect() {
        window.location.href =
          "../../webpage/donate/story.html?product_id" + json[i]["product_id"];
      }
    </script>
    <!-- footer ends -->
  </body>
</html>
